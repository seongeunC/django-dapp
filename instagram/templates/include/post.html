{% load staticfiles %}
<div class="panel panel-default post-item">
	<div style='margin-left:5%; margin-top:15px'>
		{% if post.author.user_classification == 'n' %}
  	<div><img style='height: 25px' src="{% static 'img/rookey.jpg' %}" alt="">&nbsp;&nbsp;&nbsp;{{ post.author }}</div>
	  {% elif post.author.user_classification == 'c' %}
		<div><img style='height: 25px;' src="{% static 'img/cook.jpg' %}" alt="">&nbsp;&nbsp;&nbsp;{{ post.author }}</div>
		{% endif %}
		<div style='text-align:center; color:green;'>{{ post.title }}</div>

	</div>
	{% if post_type == 'list' %}
	<a href="{% url 'post:post_detail' post_pk=post.pk %}">
		<br>
		<img src="{{ post.photo.url }}" alt="" class="post-image" >
	</a>
	{% else %}

		<img style='margin-top: 15px' src="{{ post.photo.url }}" alt="" class="post-image">
		<br>
		<br>
		<br>
		<div class="ingredient_line" style='font-size:1em; text-align:center; color:red;'><span style='background-color:yellow;'>{{ post.ingredient }}</span></div>
		<br>
		<br>
		<br>
		<div class="recipe_line"  style='font-size:2em; text-align:center;'>{{ post.recipe_list }}</div>
		<br>
		<br>
		<br>
		<hr>
	{% endif %}
	<div class="panel-body">
		<div class="btn-container">
			<form action="{% url 'post:post_like_toggle' post_pk=post.pk %}?next=
					{% if post_type == 'list' %}
						{% url 'post:post_list' %}#post-{{ post.pk }}
					{% elif post_type == 'detail' %}
						{% url 'post:post_detail' post_pk=post.pk %}
					{% endif %}"
				method="POST"
				class="form-inline">
				{% csrf_token %}
				<button class="btn btn-default btn-post-toggle" aria-label="Like button">
				  <span class="glyphicon {% if post in user.like_posts.all %} glyphicon-heart {% else %} glyphicon-heart-empty {% endif %}" aria-hidden="true"></span>
				</button>
				<a class="btn btn-default btn-post-toggle" onclick="document.getElementById('{{ comment_form.content.id_for_label }}').focus()">
					<span class="glyphicon glyphicon-pencil"></span>
				</a>
			</form>
		</div>

		{% with like_count=post.like_users.count %}
			{% if like_count %}
			<p class="like-count">
				{% if like_count < 10 %}
					<b>
					{% for user in post.like_users.all %}
						{{ user.username }}{% if not forloop.last %}, {% endif %}
					{% endfor %}
					</b>
					님이 좋아합니다
				{% else %}
					<b>좋아요 {{ user.like_posts.count }}개</b>
				{% endif %}
			</p>
			{% endif %}
		{% endwith %}

		{% if post.comments.exists %}
		<ul class="comment-list">
			{% for comment in post.comments.all %}
			<li class="comment">
				<span class="comment-author">{{ comment.author }}</span>
				<span class="comment-content">{{ comment.content }}</span>
			</li>
			{% endfor %}
		</ul>
		<hr>
		{% endif %}
		<form
			action="{% url 'post:comment_create' post_pk=post.pk %}?next=
			{% if post_type == 'list' %}
				{% url 'post:post_list' %}#post-{{ post.pk }}
			{% elif post_type == 'detail' %}
				{% url 'post:post_detail' post_pk=post.pk %}
			{% endif %}"
			method="POST"
			class="comment-form">
			{% csrf_token %}
			{{ comment_form.content }}
		</form>
	</div>
</div>
